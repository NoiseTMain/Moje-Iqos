<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generátor Identit | Moderní Design</title>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #343a40;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5em;
        }

        .layout {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        /* Sekce pro zadávání a historii */
        .sidebar {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            height: fit-content;
        }

        /* Sekce pro výsledky */
        .results-section {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="number"], input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ced4da;
            border-radius: var(--border-radius);
            box-sizing: border-box;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: #0056b3;
        }

        /* Výsledky generování */
        #output {
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid #eee;
        }

        .identity-card {
            background-color: var(--bg-color);
            border: 1px solid #dee2e6;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: var(--border-radius);
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            width: auto;
            transition: background-color 0.3s ease;
        }

        .copy-btn:hover {
            background-color: #1e7e34;
        }

        .identity-line {
            white-space: pre-line; /* Zachová zalomení řádku */
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 1.1em;
        }

        /* Historie */
        #history-list {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }

        .history-item {
            padding: 8px 0;
            border-bottom: 1px dashed #e9ecef;
            font-size: 0.9em;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .total-count {
            padding: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Generátor Náhodných Identit 👤</h1>
        </header>

        <div class="layout">
            <div class="sidebar">
                <h2>Generování</h2>
                <label for="count">Počet identit k vygenerování:</label>
                <input type="number" id="count" min="1" value="1">
                <button onclick="generateIdentities()">Generovat</button>

                <hr style="margin: 30px 0;">

                <h2>Historie Identit</h2>
                <div class="total-count">
                    Celkem vygenerováno: <span id="total-generated">0</span>
                </div>
                <div id="history-list">
                    </div>
            </div>

            <div class="results-section">
                <h2>Výsledky Generování</h2>
                <div id="output">
                    </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA PRO GENEROVÁNÍ ---
        const firstNames = ['Lukáš', 'Tomáš', 'Petr', 'Jan', 'Pavel', 'Martin', 'Ondřej', 'Jakub', 'Filip', 'Vojtěch', 'Anna', 'Tereza', 'Kateřina', 'Lucie', 'Adéla', 'Eliška', 'Veronika', 'Kristýna', 'Nikola', 'Karolína'];
        const lastNames = ['Nováček', 'Svoboda', 'Novák', 'Dvořák', 'Černý', 'Procházka', 'Kučera', 'Veselý', 'Fiala', 'Horák', 'Pospíšil', 'Malý', 'Hájek', 'Jelínek', 'Růžička', 'Beneš', 'Soukup', 'Krejčí', 'Kříž', 'Šťastný'];
        const emailDomains = ['@icloud.com', '@gmail.com', '@seznam.cz', '@post.cz'];
        
        // --- HELPER FUNKCE ---

        // Náhodný výběr z pole
        const getRandomItem = (arr) => arr[Math.floor(Math.random() * arr.length)];

        // Náhodné číslo v rozsahu
        const getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

        // Generování data narození ve věku 18 až 60 let
        function generateBirthDate() {
            const currentYear = new Date().getFullYear();
            // Generujeme náhodný rok narození
            const maxAge = 60; // Max rok narození (např. 1965 pro aktuální rok 2025)
            const minAge = 18; // Min rok narození (např. 2007 pro aktuální rok 2025)
            
            const maxBirthYear = currentYear - minAge;
            const minBirthYear = currentYear - maxAge;
            
            const year = getRandomInt(minBirthYear, maxBirthYear);
            const month = String(getRandomInt(1, 12)).padStart(2, '0');
            const day = String(getRandomInt(1, 28)).padStart(2, '0'); // Simplifikace na 28 dní pro všechny měsíce

            return `${day}.${month}.${year}`;
        }
        
        // Generování realistického emailu
        function generateEmail(firstName, lastName) {
            const firstPartOptions = [
                `${firstName.toLowerCase()}${lastName.toLowerCase()}`, // lukasfiala
                `${firstName.toLowerCase().charAt(0)}${lastName.toLowerCase()}`, // lfiala
                `${lastName.toLowerCase()}${firstName.toLowerCase().charAt(0)}`, // fialal
                `${firstName.toLowerCase()}.${lastName.toLowerCase()}`, // lukas.fiala
                `${lastName.toLowerCase()}.${firstName.toLowerCase()}`, // fiala.lukas
                `${lastName.toLowerCase()}${getRandomInt(1, 99)}`, // fiala86
                `${firstName.toLowerCase().charAt(0)}${lastName.toLowerCase()}${getRandomInt(1, 99)}`, // lfiala23
            ];
            
            const base = getRandomItem(firstPartOptions).replace(/č|š|ž|ř|ď|ť|ň|á|é|í|ó|ú|ý/g, c => ({
                'č': 'c', 'š': 's', 'ž': 'z', 'ř': 'r', 'ď': 'd', 'ť': 't', 'ň': 'n',
                'á': 'a', 'é': 'e', 'í': 'i', 'ó': 'o', 'ú': 'u', 'ý': 'y'
            })[c] || c);
            
            const domain = getRandomItem(emailDomains);
            return `${base}@${domain.substring(1)}`; // Odebere @ pro správné sestavení
        }

        // Generování realistického českého telefonního čísla (7XX XXX XXX)
        function generatePhoneNumber() {
            const prefix = [7, 6]; // Nejčastější začátky pro mobily
            let number = getRandomItem(prefix).toString();
            for (let i = 0; i < 8; i++) {
                number += getRandomInt(0, 9);
            }
            // Formát XXX XXX XXX
            return `${number.substring(0, 3)} ${number.substring(3, 6)} ${number.substring(6, 9)}`;
        }
        
        // --- HLAVNÍ FUNKCE ---
        
        function generateSingleIdentity() {
            const firstName = getRandomItem(firstNames);
            const lastName = getRandomItem(lastNames);
            const fullName = `${firstName} ${lastName}`;
            const birthDate = generateBirthDate();
            const phoneNumber = generatePhoneNumber();
            const email = generateEmail(firstName, lastName);
            
            return {
                fullName,
                birthDate,
                phoneNumber,
                email
            };
        }

        function formatIdentity(identity) {
            return `${identity.fullName}\n${identity.birthDate}\n${identity.phoneNumber}\n${identity.email}`;
        }

        function generateIdentities() {
            const countInput = document.getElementById('count');
            const count = parseInt(countInput.value, 10);
            
            if (isNaN(count) || count <= 0) {
                alert('Zadejte platný počet (alespoň 1).');
                return;
            }

            const outputDiv = document.getElementById('output');
            outputDiv.innerHTML = '';
            
            let generatedCount = 0;
            
            for (let i = 0; i < count; i++) {
                const identity = generateSingleIdentity();
                const formattedIdentity = formatIdentity(identity);
                
                // Přidání do DOM
                const card = document.createElement('div');
                card.className = 'identity-card';
                card.innerHTML = `
                    <pre class="identity-line">${formattedIdentity}</pre>
                    <button class="copy-btn" onclick="copyIdentity(this)">Kopírovat</button>
                `;
                outputDiv.appendChild(card);
                
                // Uložení do historie
                saveToHistory(identity);
                generatedCount++;
            }
        }
        
        // --- HISTORIE A UKLÁDÁNÍ ---

        const HISTORY_KEY = 'identityHistory';

        function loadHistory() {
            const history = localStorage.getItem(HISTORY_KEY);
            return history ? JSON.parse(history) : [];
        }

        function saveHistory(history) {
            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
        }

        function saveToHistory(identity) {
            const history = loadHistory();
            history.push(identity);
            saveHistory(history);
            renderHistory(history);
        }

        function renderHistory(history) {
            const historyList = document.getElementById('history-list');
            const totalCountSpan = document.getElementById('total-generated');
            
            historyList.innerHTML = '';
            totalCountSpan.textContent = history.length;

            // Zobrazíme pouze posledních 100 pro přehlednost (jinak by se to mohlo sekat)
            const recentHistory = history.slice(-100); 

            recentHistory.reverse().forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'history-item';
                itemDiv.innerHTML = `
                    <strong>${item.fullName}</strong> (${item.birthDate})<br>
                    ${item.email}
                `;
                historyList.appendChild(itemDiv);
            });
        }
        
        // --- KOPÍROVÁNÍ ---

        function copyIdentity(buttonElement) {
            // Najde textový obsah uvnitř <pre> elementu
            const textToCopy = buttonElement.parentNode.querySelector('.identity-line').textContent;

            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    buttonElement.textContent = 'Zkopírováno!';
                    buttonElement.style.backgroundColor = '#28a745'; // Zelená
                    setTimeout(() => {
                        buttonElement.textContent = 'Kopírovat';
                        buttonElement.style.backgroundColor = '#17a2b8'; // Zpět na původní barvu
                    }, 2000);
                })
                .catch(err => {
                    console.error('Chyba při kopírování:', err);
                    alert('Kopírování se nezdařilo. Zkuste to ručně.');
                });
        }
        
        // Inicializace při načtení stránky
        document.addEventListener('DOMContentLoaded', () => {
            renderHistory(loadHistory());
        });

    </script>
</body>
</html>
